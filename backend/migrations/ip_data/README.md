# IP Data

## Source

The dashboard's IP data comes from the IP2Location-DB5-Lite database. A CSV of that data is in the ZIP file in the `migrations` directory. 

## Migration

Managed database services such as RDS forbid the use of the `COPY` query with filesystem parameters. As a result, we instead perform raw `INSERT` statements to import each IP record. To fit them all in memory, this directory contains a set of compressed SQL files that contain 10,000 `INSERT` statements each. They were generated by running the `split` command on a SQL dump of the `ip_to_locations` table after populating it using the `COPY` query locally. The migration tool iterates overall of these files and streams them into the database. It's much slower than the `COPY` command, but it works on all database deployments.